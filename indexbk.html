<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>AGU2015</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="js/jquery-2.1.4.min.js"></script>
	<script src="js/jquery-confirm.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	<script src="http://code.highcharts.com/maps/highmaps.js"></script>
	<!--<script src="js/proj4.js"></script>-->
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
	<link rel="stylesheet" href="css/style.css" />
	<link rel="stylesheet" href="css/jquery-confirm.min.css" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
</head>

<body id="index" class="home">
<header class='container' id='header'>
</header>
<nav class='container roundEdge' id='nav'>
    <h1 id='project' class='center'>NSIDC - Condensing Massive Satellite Datasets For Rapid Interactive Analysis</h1>
</nav>
<section class='container' id='main'>
    <div id='content'>
	<div id='map'>
	    <script>
	    /*User Request Configuration*/
	    var sendString = "",
		dataSet = "SSMI",
		frequency = "19",
		polarization = "h",
		startDate = "2012-08-08",
		endDate = "2012-08-10";

	    var loctnArray = Array();

	    /*user request function*/
	    var anomalyRequest = {
		"dsName": dataSet,
		"dsFreq": frequency,
		"dsPolar": polarization,
		"sDate": startDate,
		"eDate": endDate,
		"locations": loctnArray
	    };

	    function updateDate() {
		startDate = "" + document.getElementById('startDate').value;
		endDate = "" + document.getElementById('endDate').value;
		anomalyRequest["sDate"] = startDate;
		anomalyRequest["eDate"] = endDate;
	    }

	    function changeDataSet(ds) {
		dataSet = ds;
		updateDate();
		//update dataSet
		anomalyRequest["dsName"] = ds;

		if( ds == "AVHRR" ){
			document.getElementById("dataset1").style.color = "black";
			document.getElementById("dataset2").style.color = "#B6B6B4";
		} else {
			document.getElementById("dataset2").style.color = "black";
			document.getElementById("dataset1").style.color = "#B6B6B4";
		}
	    };

	    function changeFrequency(freq) {
		frequency = freq;
		updateDate();
		//update Frequency
		anomalyRequest["dsFreq"] = freq;

		if( freq == '91' ){
			document.getElementById("freq91").style.color = "black";
			document.getElementById("freq85").style.color = "#B6B6B4";
			document.getElementById("freq37").style.color = "#B6B6B4";
			document.getElementById("freq22").style.color = "#B6B6B4";
			document.getElementById("freq19").style.color = "#B6B6B4";
		} else if( freq == '85' ){
		
			document.getElementById("freq91").style.color = "#B6B6B4";
			document.getElementById("freq85").style.color = "black";
			document.getElementById("freq37").style.color = "#B6B6B4";
			document.getElementById("freq22").style.color = "#B6B6B4";
			document.getElementById("freq19").style.color = "#B6B6B4";
		} else if( freq == '37' ){
			document.getElementById("freq91").style.color = "#B6B6B4";
			document.getElementById("freq85").style.color = "#B6B6B4";
			document.getElementById("freq37").style.color = "black";
			document.getElementById("freq22").style.color = "#B6B6B4";
			document.getElementById("freq19").style.color = "#B6B6B4";
		} else if( freq == '22' ){
			document.getElementById("freq91").style.color = "#B6B6B4";
			document.getElementById("freq85").style.color = "#B6B6B4";
			document.getElementById("freq37").style.color = "#B6B6B4";
			document.getElementById("freq22").style.color = "black";
			document.getElementById("freq19").style.color = "#B6B6B4";
		} else {
			document.getElementById("freq91").style.color = "#B6B6B4";
			document.getElementById("freq85").style.color = "#B6B6B4";
			document.getElementById("freq37").style.color = "#B6B6B4";
			document.getElementById("freq22").style.color = "#B6B6B4";
			document.getElementById("freq19").style.color = "black";
		}
	    };

	    function changePolarization(pol) {
		polarization = pol;
		updateDate();
		anomalyRequest["dsPolar"] = pol;

		if( pol == 'v' ){
			document.getElementById("vertical").style.color = "black";
			document.getElementById("horizontal").style.color = "#B6B6B4";
		} else {
			document.getElementById("horizontal").style.color = "black";
			document.getElementById("vertical").style.color = "#B6B6B4";
		}
	    }

	    function sendRequest(anomalyRequest) {
		updateDate();
		anomalyRequest["dsFreq"] = 's'+frequency+polarization;
		var ajaxHandle = $
		    .ajax({
			type: "POST",
			contentType: "application/json; charset=utf-8",
			url: "anomaly/ajaxRetrvImage.do",
			data: JSON.stringify(anomalyRequest),
			dataType: 'jsonp',
			async: false,
			success: function(response) {
			    var win = window.open("anomaly.html",
				'_blank');
			    win.focus();
			}
		    });
		var w = window.open("anomaly/ajaxRetrvImage.do");
		w.document.write(ajaxHandle.responseText);
		w.document.close();
	    };

	    </script>
    </div>
    </div>
    <aside id='sidebar' class='roundEdge'>
	<br><br><span id="datasetName"><font color="Black">Data Set</font></span>
	<br>
	<button id="dataset1" class="myButton" onclick="changeDataSet('AVHRR')">AVHRR</button>
	<button id="dataset2" class="myButton" onclick="changeDataSet('SSMI')">SSMI</button>
	<br>
	<br>
	<br><span id="datasetFrequency"><font color="Black">Frequency [ SSMI ]</font></span>
	<br>
	<button id="freq91" class="myButton" onclick="changeFrequency('91')">91.7</button>
	<button id="freq85" class="myButton" onclick="changeFrequency('85')">85.5</button>
	<button id="freq37" class="myButton" onclick="changeFrequency('37')">37.0</button>
	<button id="freq22" class="myButton" onclick="changeFrequency('22')">22.2</button>
	<button id="freq19" class="myButton" onclick="changeFrequency('19')">19.3</button>
	<br>
	<br>
	<br><span id="datasetFrequency"><font color="Black">Polarization [ SSMI ]</font></span>
	<br>
	<button id="vertical" class="myButton" onclick="changePolarization('v')">vertical</button>
	<button id="horizontal" class="myButton" onclick="changePolarization('h')">horizontal</button>
	<br>
	<br>
	<br><span id="datasetField"><font color="Black">Start Date</font></span>
	<br>
	<input id="startDate" name="startDate" value="2012-08-08" type="date" min="1987-01-01" max="2014-12-31" onclick="updateDate()" />
	<br>
	<br>
	<br><span id="datasetField"><font color="Black">End Date</font></span>
	<br>
	<input id="endDate" name="endDate" value="2012-08-20" type="date" min="1987-01-01" max="2014-12-31" onclick="updateDate()" />
	<br>
	<br>
	<br><span id="datasetField"><font color="Black">Search Polygon Location</font></span>
	<br>
	<button id="searchButtonToggle" class="myButton" onclick="enablePolygonSearch()">Enable</button>
    </aside>
</section>
<footer class='container' id='footer'>
    <p>Â© 2015 NSIDC & University of Colorado at Boulder</p>
</footer>
</body>

</html>
